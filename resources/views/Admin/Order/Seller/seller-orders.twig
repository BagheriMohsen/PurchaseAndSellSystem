{% extends 'Admin/Master/layout' %}

{% block title %}
  لیست سفارشات ثبت شده
{% endblock %}

{% block header %}
  {% include 'Admin/Master/header' %}
{% endblock %}

{% block sidebar %}
  {% include 'Admin/Master/sidebar' %}
{% endblock %}

{% block path %}
  {% include 'Admin/Master/path' with {'title':'لیست سفارشات ثبت شده'} %}
{% endblock %}

{% block content %}

  {% include 'Messages/switchSuccess' %}

  <div class="row">
    <div class="card col-sm-12">
                <div class="card-header">
                  <ul>
                    {{ orders.render | raw }}
                  </ul>
                </div>
                <!-- /.card-header -->
                <div class="card-body col-12 mx-auto">
                  <table  id="orderTable" class="table table-striped table-bordered table-sm">
                    <thead>
                    <tr>
                      <th>تاریخ ثبت</th>
                      {# <th>تاریخ تخصیص</th> #}
                      <th>استان-شهر</th>
                      <th>کد پستی</th>
                      <th>نام خریدار</th>
                      <th>همراه-ثابت</th>
                      <th>نوع پرداخت</th>
                      <th>کالسنتر</th>
                      <th>عملیات</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for order in orders %}
                      <tr>
                        <td class="timestamp">{{order.created_at | date('Y-m-d')}}</td>
                        {# <td>{{'-'}}</td> #}
                        <td>{{order.state.name}}{{'-'}}{{order.city.name}}</td>
                        <td>{{order.postalCode}}</td>
                        <td>{{order.fullName}}</td>
                        <td>{{order.mobile}}{{'-'}}{{order.telephone}}</td>
                        {% if order.paymentMethod == 'cash' %}
                          <td>{{'نقدی'}}</td>
                        {% else %}
                          <td>{{'غیر نقدی'}}</td>
                        {% endif %}
                        <td>{{''}}</td>
                        <td clمشخصاتass="d-flex justify-content-center">
                          <a title="محصولات این سفارش" class="text-secondary" data-toggle="modal" href="#order{{order.id}}">
                            <sub class="text-dark">
                              {{order.products.count()}}
                            </sub>
                            <i class="fas fa-shopping-basket crud-icon"></i>
                          </a>
                          <a  title="ویرایش" class="text-warning mx-auto"
                            href="#">
                            <i class="far fa-edit crud-icon"></i>
                          </a>
                        </td>
                      </tr>
                    {% endfor %}
                    </tbody>
                    
                  </table>
                </div>
                <!-- /.card-body -->
              </div>
          </div>

          
{# Order Product #}
{% for order in orders %}
<!-- The Modal -->
<div class="modal fade " id="order{{order.id}}">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header bg-success justify-content-start pb-0">
        <button type="button" class="close ml-0" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="white-text">&times;</span>
        </button>
        <p class="heading lead"> 
          محصولات سفارش

          {{order.fullName}}
        </p>
      </div>

      <!-- Modal body -->
      <div class="modal-body text-center ">
        <table  class="table table-bordered table-striped bg-white pt-2 pb-2">
          <thead>
          <tr class="text-center">
            <th>محصول</th>
            <th>نوع</th>
            <th>مبلغ</th>
            <th>تعداد</th>
            <th>تخفیف</th>
            <th>مبلغ کل</th>
          </tr>
          </thead>
          <tbody>
            {% for item in order.products %}
              <tr class="text-center">

                <td>{{ item.product.name }}</td>
                {% if item.type is null %}
                  <td>{{ 'ندارد' }}</td>
                {% else %}
                  <td>{{ item.type }}</td>
                {% endif %}
                <td>{{ item.product.price }}</td>
                <td>{{ item.count }}</td>
                <td>{{ item.off }}</td>
                <td>{{ (item.product.price * item.count) - item.off }}</td>
                  {# <td>
                  <form  action="#" method="post" >
                      <input type="hidden" name="_token" value="{{csrf_token()}}" />
                      <input type="hidden" name="_method" value="DELETE" />
                      <input type="hidden" name="user_id" value="{{item.id}}">
                      <a href="javascript:void(0)" class="deleteSpecialTariff text-danger btn-sm" name="button">
                      <i class="far fa-trash-alt crud-icon"></i>
                    </a>
                  </form>
                </td> #}
              </tr>

        {% endfor %}

          </tbody>

        </table>
       <!-- 
        #########
        More Details
        #########
       -->
       <table  class="table table-bordered table-striped bg-white pt-2 pb-2">
          <thead>
          <tr class="text-center">
            <th>جمع کل سفارش</th>
            <th>پیش پرداخت</th>
            <th>جمع تعداد کالا</th> 
            <th>جمع کل تخفیفات</th>
          </tr>
          </thead>
          <tbody>
              <tr class="text-center">
                <td>{{ '' }}</td>
                <td>{{ '' }}</td>
                <td>{{ '' }}</td>
                <td>{{ '' }}</td>
              </tr>
          </tbody>
        </table>
      <table  class="table table-bordered table-striped bg-white pt-2 pb-2">
          <thead>
          <tr class="text-center">
            <th>آدرس کامل</th>
            <th>توضیحات فروشنده</th>
          </tr>
          </thead>
          <tbody>
              <tr class="text-center">
                <td>{{ item.address }}</td>
                <td>{{ item.sellerDescription }}</td>
              </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

</div>
{% endfor %}
{# Order Product #}



{% endblock %}

{% block footer %}
  {% include 'Admin/Master/footer' %}
{% endblock %}

